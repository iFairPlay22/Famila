{"remainingRequest":"/home/ewen/Téléchargements/David-Website-Front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ewen/Téléchargements/David-Website-Front/src/components/ContactForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ewen/Téléchargements/David-Website-Front/src/components/ContactForm.vue","mtime":1610994454814},{"path":"/home/ewen/Téléchargements/David-Website-Front/node_modules/vuetify-loader/lib/loader.js","mtime":1610994452828},{"path":"/home/ewen/Téléchargements/David-Website-Front/node_modules/cache-loader/dist/cjs.js","mtime":1610994451860},{"path":"/home/ewen/Téléchargements/David-Website-Front/node_modules/vue-loader/lib/index.js","mtime":1610994452788}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  name: \"ContactForm\",\n  data() {\n    return {\n      isValid: false,\n      snackbar: {\n        active: false,\n        timeout: 5000,\n        ok: true,\n        text: () =>\n          this.snackbar.ok\n            ? \"Votre demande a bien été prise en compte.\"\n            : \"Votre demande n'a pas été prise en compte\",\n        color: () => (this.snackbar.ok ? \"green\" : \"red\")\n      },\n      form: {\n        data: {\n          name: \"\",\n          email: \"\",\n          phone: \"\",\n          message: \"\"\n        },\n        rules: {\n          name: [v => !!v || \"Nom obligatoire\"],\n          email: [\n            v => !!v || \"Email obligatoire\",\n            v => /.+@.+\\..+/.test(v) || \"L'email saisi n'est pas valide\"\n          ],\n          phone: [\n            v =>\n              /(^$)|(^0[0-9]{9}$)|(^0[0-9]( [0-9]{2}){4}$)/.test(v) ||\n              \"Le numéro de téléphone saisi n'est pas valide\"\n          ],\n          message: [\n            v => !!v || \"Message obligatoire\",\n            v => (v && 20 <= v.length) || \"Le message est trop court\",\n            v => (v && v.length <= 3000) || \"Le message est trop long\"\n          ]\n        }\n      }\n    };\n  },\n  methods: {\n    sendForm() {\n      if (!this.isValid) return;\n\n      fetch(\"https://api.emailjs.com/api/v1.0/email/send\", {\n        mode: \"cors\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          service_id: \"service_b3qh7ej\",\n          template_id: \"template_zbxe3j4\",\n          user_id: \"user_wl0Ew9bwIay0RJlT6sIbx\",\n          template_params: {\n            owner_name: \"David Bouquet\",\n            owner_email: \"davidbouquet.musique@gmail.com\",\n            client_name: this.form.data.name,\n            client_email: this.form.data.email,\n            client_phone: this.form.data.phone,\n            client_message: this.form.data.message\n          }\n        })\n      })\n        .then(response => {\n          this.snackbar.ok = response.ok;\n          if (response.ok) {\n            this.form.data = {\n              name: \"\",\n              email: \"\",\n              phone: \"\",\n              message: \"\"\n            };\n            this.$refs[\"form\"].reset();\n          }\n        })\n        // .catch((error) => {\n        //   this.snackbar.ok = false;\n        //   console.log(error);\n        // })\n        .finally(() => {\n          this.snackbar.active = true;\n        });\n    }\n  }\n};\n",{"version":3,"sources":["ContactForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ContactForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card flat color=\"transparent\" class=\"my-8\">\n    <v-card-title class=\"custom-title text-center mb-5 text-break\"\n      >Formulaire de contact</v-card-title\n    >\n    <v-form\n      ref=\"form\"\n      v-model=\"isValid\"\n      class=\"d-flex flex-column justify-space-around mx-5\"\n    >\n      <v-text-field\n        v-model=\"form.data.name\"\n        :rules=\"form.rules.name\"\n        placeholder=\"Votre nom\"\n        required\n      ></v-text-field>\n      <v-text-field\n        v-model=\"form.data.email\"\n        :rules=\"form.rules.email\"\n        placeholder=\"Votre email\"\n        required\n      ></v-text-field>\n      <v-text-field\n        v-model=\"form.data.phone\"\n        :rules=\"form.rules.phone\"\n        placeholder=\"Votre numéro de téléphone\"\n      ></v-text-field>\n      <v-textarea\n        v-model=\"form.data.message\"\n        :rules=\"form.rules.message\"\n        placeholder=\"Votre demande\"\n        required\n      ></v-textarea\n      ><v-btn tile color=\"success\" @click=\"sendForm\" :disabled=\"!isValid\">\n        <v-icon left>\n          mdi-send\n        </v-icon>\n        Envoyer\n      </v-btn></v-form\n    >\n    <v-snackbar v-model=\"snackbar.active\" :timeout=\"snackbar.timeout\">\n      {{ snackbar.text() }}\n\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          :color=\"snackbar.color()\"\n          text\n          v-bind=\"attrs\"\n          @click=\"snackbar.active = false\"\n        >\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: \"ContactForm\",\n  data() {\n    return {\n      isValid: false,\n      snackbar: {\n        active: false,\n        timeout: 5000,\n        ok: true,\n        text: () =>\n          this.snackbar.ok\n            ? \"Votre demande a bien été prise en compte.\"\n            : \"Votre demande n'a pas été prise en compte\",\n        color: () => (this.snackbar.ok ? \"green\" : \"red\")\n      },\n      form: {\n        data: {\n          name: \"\",\n          email: \"\",\n          phone: \"\",\n          message: \"\"\n        },\n        rules: {\n          name: [v => !!v || \"Nom obligatoire\"],\n          email: [\n            v => !!v || \"Email obligatoire\",\n            v => /.+@.+\\..+/.test(v) || \"L'email saisi n'est pas valide\"\n          ],\n          phone: [\n            v =>\n              /(^$)|(^0[0-9]{9}$)|(^0[0-9]( [0-9]{2}){4}$)/.test(v) ||\n              \"Le numéro de téléphone saisi n'est pas valide\"\n          ],\n          message: [\n            v => !!v || \"Message obligatoire\",\n            v => (v && 20 <= v.length) || \"Le message est trop court\",\n            v => (v && v.length <= 3000) || \"Le message est trop long\"\n          ]\n        }\n      }\n    };\n  },\n  methods: {\n    sendForm() {\n      if (!this.isValid) return;\n\n      fetch(\"https://api.emailjs.com/api/v1.0/email/send\", {\n        mode: \"cors\",\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          service_id: \"service_b3qh7ej\",\n          template_id: \"template_zbxe3j4\",\n          user_id: \"user_wl0Ew9bwIay0RJlT6sIbx\",\n          template_params: {\n            owner_name: \"David Bouquet\",\n            owner_email: \"davidbouquet.musique@gmail.com\",\n            client_name: this.form.data.name,\n            client_email: this.form.data.email,\n            client_phone: this.form.data.phone,\n            client_message: this.form.data.message\n          }\n        })\n      })\n        .then(response => {\n          this.snackbar.ok = response.ok;\n          if (response.ok) {\n            this.form.data = {\n              name: \"\",\n              email: \"\",\n              phone: \"\",\n              message: \"\"\n            };\n            this.$refs[\"form\"].reset();\n          }\n        })\n        // .catch((error) => {\n        //   this.snackbar.ok = false;\n        //   console.log(error);\n        // })\n        .finally(() => {\n          this.snackbar.active = true;\n        });\n    }\n  }\n};\n</script>\n"]}]}